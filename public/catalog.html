<style>
.remoed-header {
    background: #fafdff;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-left: 32px;
    padding-right: 32px;
    height: 56px;
    min-height: 40px;
    max-height: 64px;
    box-shadow: 0 2px 8px rgba(28,167,231,0.06), 0 1px 0 #e6f0fa;
    border-bottom: 1px solid #e6f0fa;
}
</style>
<body>
    <link rel="stylesheet" href="modern-styles.css">
    <!-- Header -->
    <div class="remoed-header">
        <div class="remoed-logo" style="height:100%; display:flex; align-items:center; gap:10px;">
            <img src="remoed-logo.png" alt="RemoEdPH Logo" style="height:36px; width:auto; display:inline-block; vertical-align:middle;">
            <span class="remoed-title" style="font-size:1.3rem; font-weight:700; color:#1ca7e7; letter-spacing:1px;">RemoEdPH</span>
        </div>
        <div class="remoed-user">
            <div class="remoed-avatar" id="remoed-avatar">
                <img id="profile-image" src="" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: none;">
                <span id="avatar-text">K</span>
            </div>
            <span class="remoed-username" id="remoed-username"></span>
        </div>
    </div>
        <script src="avatar-helper.js"></script>
        <script>
            (function(){
                const username = localStorage.getItem('remoedUsername') || '';
                const teacherId = localStorage.getItem('teacherId');

                let displayName = '';
                if (username) {
                    displayName = username.split('@')[0];
                    document.getElementById('remoed-username').textContent = displayName;
                } else {
                    document.getElementById('remoed-username').textContent = '';
                }

                // Use helper if available; otherwise fallback to direct assignments
                if (window.setAvatar) {
                    setAvatar({ displayName: displayName || 'User', imgSelector: '#profile-image', textSelector: '#avatar-text' });
                } else if (displayName) {
                    document.getElementById('avatar-text').textContent = displayName[0].toUpperCase();
                }

                // Load profile picture if available
                if (teacherId) {
                    loadProfilePicture(teacherId);
                }

                // Load profile picture from backend
                async function loadProfilePicture(teacherId) {
                    try {
                        const token = localStorage.getItem('token');
                        if (!token) return;

                        const response = await fetch(`/api/teacher/profile`, {
                            method: 'GET',
                            headers: { 'Authorization': `Bearer ${token}` }
                        });

                        if (response.ok) {
                            const data = await response.json();
                            const pic = data && data.profile && data.profile.profilePicture;
                            const firstName = data && data.profile && data.profile.firstName;
                            if (window.setAvatar) {
                                setAvatar({ imageUrl: pic || '', displayName: firstName || displayName || 'User', imgSelector: '#profile-image', textSelector: '#avatar-text' });
                            } else if (pic) {
                                const profileImage = document.getElementById('profile-image');
                                const avatarText = document.getElementById('avatar-text');
                                profileImage.src = pic;
                                profileImage.style.display = 'block';
                                avatarText.style.display = 'none';
                            }
                        }
                    } catch (error) {
                        console.error('Error loading profile picture:', error);
                    }
                }
            })();
        </script>
    <!-- Main Content -->
    <div class="remoed-content">
        <!-- ... existing catalog page content ... -->
    </div>
</body>
